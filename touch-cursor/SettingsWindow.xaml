<Window x:Class="touch_cursor.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Advanced Settings - TouchCursor" Height="600" Width="700"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        ShowInTaskbar="False">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" FontSize="20" FontWeight="Bold" Margin="0,0,0,20">
            Advanced Settings
        </TextBlock>

        <!-- Tab Control for different settings -->
        <TabControl Grid.Row="1" Margin="0,0,0,20">
            <!-- General Tab -->
            <TabItem Header="General">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <GroupBox Header="Activation Key" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                                    Choose the key that activates TouchCursor mode:
                                </TextBlock>
                                <ComboBox x:Name="ActivationKeyComboBox"
                                          Width="200" HorizontalAlignment="Left"
                                          SelectionChanged="ActivationKeyComboBox_SelectionChanged">
                                    <ComboBoxItem Content="Space (Default)" Tag="32"/>
                                    <ComboBoxItem Content="CapsLock" Tag="20"/>
                                    <ComboBoxItem Content="Left Ctrl" Tag="162"/>
                                    <ComboBoxItem Content="Right Ctrl" Tag="163"/>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Behavior" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="ShowInTrayCheckBox" Content="Show icon in notification area"
                                          IsChecked="True" Margin="0,5"
                                          Checked="ShowInTrayCheckBox_Changed"
                                          Unchecked="ShowInTrayCheckBox_Changed"/>
                                <CheckBox x:Name="CheckUpdatesCheckBox" Content="Automatically check for updates"
                                          IsChecked="True" Margin="0,5"
                                          Checked="CheckUpdatesCheckBox_Changed"
                                          Unchecked="CheckUpdatesCheckBox_Changed"/>
                                <CheckBox x:Name="BeepForMistakesCheckBox" Content="Beep for mistakes in training mode"
                                          IsChecked="False" Margin="0,5"
                                          Checked="BeepForMistakesCheckBox_Changed"
                                          Unchecked="BeepForMistakesCheckBox_Changed"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="About" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <TextBlock TextWrapping="Wrap" Margin="0,5">
                                    <Bold>TouchCursor for Windows</Bold>
                                </TextBlock>
                                <TextBlock TextWrapping="Wrap" Margin="0,5">
                                    Version: 2.0.0 (C# Edition)
                                </TextBlock>
                                <TextBlock TextWrapping="Wrap" Margin="0,5">
                                    Ported from original TouchCursor by Martin Stone
                                </TextBlock>
                                <TextBlock TextWrapping="Wrap" Margin="0,5">
                                    Licensed under GNU GPL v3.0
                                </TextBlock>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Key Mappings Tab -->
            <TabItem Header="Key Mappings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10" FontWeight="Bold">
                            Current Key Mappings
                        </TextBlock>
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" Foreground="Gray">
                            Custom key mapping editor will be available in a future update.
                        </TextBlock>

                        <DataGrid x:Name="KeyMappingsDataGrid"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  Height="350"
                                  GridLinesVisibility="All"
                                  HeadersVisibility="Column">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Activation Key +" Width="150" Binding="{Binding SourceKey}"/>
                                <DataGridTextColumn Header="Maps To" Width="150" Binding="{Binding TargetKey}"/>
                                <DataGridTextColumn Header="Description" Width="*" Binding="{Binding Description}"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Program Lists Tab -->
            <TabItem Header="Program Lists">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10" FontWeight="Bold">
                            Program-Specific Settings
                        </TextBlock>
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" Foreground="Gray">
                            Configure which programs TouchCursor should be enabled or disabled in.
                        </TextBlock>

                        <GroupBox Header="Disable in these programs" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <ListBox x:Name="DisableProgsListBox" Height="150" Margin="0,0,0,10"/>
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="Add..." Width="80" Margin="0,0,5,0"
                                            Click="AddDisableProg_Click"/>
                                    <Button Content="Remove" Width="80"
                                            Click="RemoveDisableProg_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Enable only in these programs" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="UseEnableListCheckBox"
                                          Content="Use enable list (TouchCursor will only work in listed programs)"
                                          Margin="0,0,0,10"
                                          Checked="UseEnableListCheckBox_Changed"
                                          Unchecked="UseEnableListCheckBox_Changed"/>
                                <ListBox x:Name="EnableProgsListBox" Height="150" Margin="0,0,0,10"
                                         IsEnabled="{Binding IsChecked, ElementName=UseEnableListCheckBox}"/>
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="Add..." Width="80" Margin="0,0,5,0"
                                            Click="AddEnableProg_Click"
                                            IsEnabled="{Binding IsChecked, ElementName=UseEnableListCheckBox}"/>
                                    <Button Content="Remove" Width="80"
                                            Click="RemoveEnableProg_Click"
                                            IsEnabled="{Binding IsChecked, ElementName=UseEnableListCheckBox}"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Bottom Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Reset to Defaults" Width="120" Height="30" Margin="0,0,10,0"
                    Click="ResetButton_Click"/>
            <Button Content="OK" Width="80" Height="30" Margin="0,0,10,0"
                    IsDefault="True" Click="OkButton_Click"/>
            <Button Content="Cancel" Width="80" Height="30"
                    IsCancel="True" Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
