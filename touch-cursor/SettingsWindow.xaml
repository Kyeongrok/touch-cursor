<Window x:Class="touch_cursor.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Advanced Settings - TouchCursor" Height="600" Width="700"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        ShowInTaskbar="False">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock x:Name="HeaderTextBlock" Grid.Row="0" FontSize="20" FontWeight="Bold" Margin="0,0,0,20">
            Advanced Settings
        </TextBlock>

        <!-- Tab Control for different settings -->
        <TabControl x:Name="MainTabControl" Grid.Row="1" Margin="0,0,0,20">
            <!-- General Tab -->
            <TabItem x:Name="GeneralTab" Header="General">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <GroupBox x:Name="ActivationKeyGroupBox" Header="Activation Key" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <TextBlock x:Name="ActivationKeyDescriptionTextBlock" TextWrapping="Wrap" Margin="0,0,0,10">
                                    Choose the key that activates TouchCursor mode:
                                </TextBlock>
                                <ComboBox x:Name="ActivationKeyComboBox"
                                          Width="200" HorizontalAlignment="Left"
                                          SelectionChanged="ActivationKeyComboBox_SelectionChanged">
                                    <ComboBoxItem x:Name="ActivationKeySpace" Content="Space (Default)" Tag="32"/>
                                    <ComboBoxItem x:Name="ActivationKeyCapsLock" Content="CapsLock" Tag="20"/>
                                    <ComboBoxItem x:Name="ActivationKeyLeftCtrl" Content="Left Ctrl" Tag="162"/>
                                    <ComboBoxItem x:Name="ActivationKeyRightCtrl" Content="Right Ctrl" Tag="163"/>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox x:Name="BehaviorGroupBox" Header="Behavior" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="ShowInTrayCheckBox" Content="Show icon in notification area"
                                          IsChecked="True" Margin="0,5"
                                          Checked="ShowInTrayCheckBox_Changed"
                                          Unchecked="ShowInTrayCheckBox_Changed"/>
                                <CheckBox x:Name="CheckUpdatesCheckBox" Content="Automatically check for updates"
                                          IsChecked="True" Margin="0,5"
                                          Checked="CheckUpdatesCheckBox_Changed"
                                          Unchecked="CheckUpdatesCheckBox_Changed"/>
                                <CheckBox x:Name="BeepForMistakesCheckBox" Content="Beep for mistakes in training mode"
                                          IsChecked="False" Margin="0,5"
                                          Checked="BeepForMistakesCheckBox_Changed"
                                          Unchecked="BeepForMistakesCheckBox_Changed"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox x:Name="LanguageGroupBox" Header="Language" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <TextBlock x:Name="LanguageDescriptionTextBlock" TextWrapping="Wrap" Margin="0,0,0,10">
                                    Select your preferred language:
                                </TextBlock>
                                <ComboBox x:Name="LanguageComboBox"
                                          Width="200" HorizontalAlignment="Left"
                                          DisplayMemberPath="NativeName"
                                          SelectedValuePath="Code"
                                          SelectionChanged="LanguageComboBox_SelectionChanged"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox x:Name="AboutGroupBox" Header="About" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <TextBlock x:Name="AboutTitleTextBlock" TextWrapping="Wrap" Margin="0,5">
                                    <Bold>TouchCursor for Windows</Bold>
                                </TextBlock>
                                <TextBlock x:Name="AboutVersionTextBlock" TextWrapping="Wrap" Margin="0,5">
                                    Version: 2.0.0 (C# Edition)
                                </TextBlock>
                                <TextBlock x:Name="AboutOriginalTextBlock" TextWrapping="Wrap" Margin="0,5">
                                    Ported from original TouchCursor by Martin Stone
                                </TextBlock>
                                <TextBlock x:Name="AboutLicenseTextBlock" TextWrapping="Wrap" Margin="0,5">
                                    Licensed under GNU GPL v3.0
                                </TextBlock>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Key Mappings Tab -->
            <TabItem x:Name="KeyMappingsTab" Header="Key Mappings">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock x:Name="CurrentKeyMappingsTextBlock" Grid.Row="0" TextWrapping="Wrap" Margin="0,0,0,10" FontWeight="Bold">
                        Current Key Mappings
                    </TextBlock>
                    <TextBlock x:Name="KeyMappingsNoteTextBlock" Grid.Row="1" TextWrapping="Wrap" Margin="0,0,0,15" Foreground="Gray">
                        Click on a mapping and use the buttons below to edit or remove it.
                    </TextBlock>

                    <DataGrid x:Name="KeyMappingsDataGrid" Grid.Row="2"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              GridLinesVisibility="All"
                              HeadersVisibility="Column"
                              SelectionMode="Single"
                              SelectionChanged="KeyMappingsDataGrid_SelectionChanged"
                              MouseDoubleClick="KeyMappingsDataGrid_MouseDoubleClick">
                        <DataGrid.Columns>
                            <DataGridTextColumn x:Name="ColumnActivationKey" Header="Activation Key +" Width="150" Binding="{Binding SourceKey}"/>
                            <DataGridTextColumn x:Name="ColumnMapsTo" Header="Maps To" Width="150" Binding="{Binding TargetKey}"/>
                            <DataGridTextColumn x:Name="ColumnDescription" Header="Description" Width="*" Binding="{Binding Description}"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,10,0,0" HorizontalAlignment="Left">
                        <Button x:Name="AddMappingButton" Content="Add..." Width="80" Margin="0,0,5,0"
                                Click="AddMappingButton_Click"/>
                        <Button x:Name="EditMappingButton" Content="Edit..." Width="80" Margin="0,0,5,0"
                                Click="EditMappingButton_Click"
                                IsEnabled="False"/>
                        <Button x:Name="RemoveMappingButton" Content="Remove" Width="80"
                                Click="RemoveMappingButton_Click"
                                IsEnabled="False"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- Program Lists Tab -->
            <TabItem x:Name="ProgramListsTab" Header="Program Lists">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <TextBlock x:Name="ProgramSpecificTextBlock" TextWrapping="Wrap" Margin="0,0,0,10" FontWeight="Bold">
                            Program-Specific Settings
                        </TextBlock>
                        <TextBlock x:Name="ProgramSpecificNoteTextBlock" TextWrapping="Wrap" Margin="0,0,0,15" Foreground="Gray">
                            Configure which programs TouchCursor should be enabled or disabled in.
                        </TextBlock>

                        <GroupBox x:Name="DisableProgsGroupBox" Header="Disable in these programs" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <ListBox x:Name="DisableProgsListBox" Height="150" Margin="0,0,0,10"/>
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="AddDisableProgButton" Content="Add..." Width="80" Margin="0,0,5,0"
                                            Click="AddDisableProg_Click"/>
                                    <Button x:Name="RemoveDisableProgButton" Content="Remove" Width="80"
                                            Click="RemoveDisableProg_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox x:Name="EnableProgsGroupBox" Header="Enable only in these programs" Margin="0,0,0,15">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="UseEnableListCheckBox"
                                          Content="Use enable list (TouchCursor will only work in listed programs)"
                                          Margin="0,0,0,10"
                                          Checked="UseEnableListCheckBox_Changed"
                                          Unchecked="UseEnableListCheckBox_Changed"/>
                                <ListBox x:Name="EnableProgsListBox" Height="150" Margin="0,0,0,10"
                                         IsEnabled="{Binding IsChecked, ElementName=UseEnableListCheckBox}"/>
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="AddEnableProgButton" Content="Add..." Width="80" Margin="0,0,5,0"
                                            Click="AddEnableProg_Click"
                                            IsEnabled="{Binding IsChecked, ElementName=UseEnableListCheckBox}"/>
                                    <Button x:Name="RemoveEnableProgButton" Content="Remove" Width="80"
                                            Click="RemoveEnableProg_Click"
                                            IsEnabled="{Binding IsChecked, ElementName=UseEnableListCheckBox}"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Bottom Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="ResetButton" Content="Reset to Defaults" Width="120" Height="30" Margin="0,0,10,0"
                    Click="ResetButton_Click"/>
            <Button x:Name="OkButton" Content="OK" Width="80" Height="30" Margin="0,0,10,0"
                    IsDefault="True" Click="OkButton_Click"/>
            <Button x:Name="CancelButton" Content="Cancel" Width="80" Height="30"
                    IsCancel="True" Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
