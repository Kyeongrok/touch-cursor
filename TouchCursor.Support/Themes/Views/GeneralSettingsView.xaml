<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:views="clr-namespace:TouchCursor.Support.UI.Views"
                    xmlns:loc="clr-namespace:TouchCursor.Support.Localization">

    <Style TargetType="{x:Type views:GeneralSettingsView}">
        <Setter Property="Background" Value="White"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type views:GeneralSettingsView}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="10">
                                <!-- Activation Key Profiles -->
                                <GroupBox Header="{loc:Localize SettingsWindow.ActivationKeyProfiles, Default='Activation Key Profiles'}" Margin="0,0,0,15">
                                    <StackPanel Margin="10">
                                        <TextBlock Text="{loc:Localize SettingsWindow.ActivationKeyProfilesDescription, Default='Manage multiple activation keys, each with their own key mappings:'}"
                                                   TextWrapping="Wrap" Margin="0,0,0,10"/>
                                        <ListBox x:Name="PART_ActivationKeyProfilesListBox"
                                                 Height="120" Margin="0,0,0,10"
                                                 ItemsSource="{Binding ActivationKeyProfiles}"
                                                 SelectedItem="{Binding SelectedActivationKeyProfile}">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding KeyName}" Width="150" FontWeight="Bold"/>
                                                        <TextBlock Text="{Binding MappingCount, StringFormat='({0} mappings)'}" Foreground="Gray"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="{loc:Localize SettingsWindow.AddProfile, Default='Add Profile...'}" Width="120" Margin="0,0,5,0"
                                                    Command="{Binding AddActivationKeyProfileCommand}"/>
                                            <Button Content="{loc:Localize SettingsWindow.RemoveProfile, Default='Remove Profile'}" Width="120"
                                                    Command="{Binding RemoveActivationKeyProfileCommand}"/>
                                        </StackPanel>
                                    </StackPanel>
                                </GroupBox>

                                <!-- Behavior -->
                                <GroupBox Header="{loc:Localize SettingsWindow.Behavior, Default='Behavior'}" Margin="0,0,0,15">
                                    <StackPanel Margin="10">
                                        <CheckBox Content="{loc:Localize SettingsWindow.EnableTouchCursor, Default='Enable TouchCursor'}"
                                                  IsChecked="{Binding IsEnabled}" Margin="0,5"/>
                                        <CheckBox Content="{loc:Localize SettingsWindow.TrainingMode, Default='Training Mode'}"
                                                  IsChecked="{Binding TrainingMode}" Margin="0,5"/>
                                        <CheckBox Content="{loc:Localize SettingsWindow.RunAtStartup, Default='Run at Windows startup'}"
                                                  IsChecked="{Binding RunAtStartup}" Margin="0,5"/>
                                        <CheckBox Content="{loc:Localize SettingsWindow.ShowInTray, Default='Show in system tray'}"
                                                  IsChecked="{Binding ShowInTray}" Margin="0,5"/>
                                        <CheckBox Content="{loc:Localize SettingsWindow.CheckUpdates, Default='Check for updates'}"
                                                  IsChecked="{Binding CheckUpdates}" Margin="0,5"/>
                                        <CheckBox Content="{loc:Localize SettingsWindow.BeepForMistakes, Default='Beep for mistakes'}"
                                                  IsChecked="{Binding BeepForMistakes}" Margin="0,5"/>

                                        <Separator Margin="0,10"/>

                                        <!-- Hold Delay -->
                                        <TextBlock Text="{loc:Localize SettingsWindow.HoldDelay, Default='Activation Key Hold Delay (ms):'}" Margin="0,5,0,5"/>
                                        <TextBlock Text="{loc:Localize SettingsWindow.HoldDelayDescription, Default='The activation key must be held for this duration before cursor mode activates.'}"
                                                   TextWrapping="Wrap" Margin="0,0,0,5" FontSize="11" Foreground="Gray"/>
                                        <Grid Margin="0,5,0,10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider Grid.Column="0" Minimum="0" Maximum="300"
                                                    TickFrequency="10" IsSnapToTickEnabled="True"
                                                    Value="{Binding HoldDelayMs}" Margin="0,0,10,0"/>
                                            <TextBlock Grid.Column="1" Width="50" VerticalAlignment="Center"
                                                       Text="{Binding HoldDelayMs, StringFormat='{}{0} ms'}"/>
                                        </Grid>

                                        <!-- Rollover Threshold -->
                                        <TextBlock Text="{loc:Localize SettingsWindow.RolloverThreshold, Default='Rollover Threshold (ms):'}" Margin="0,5,0,5"/>
                                        <TextBlock Text="{loc:Localize SettingsWindow.RolloverThresholdDescription, Default='If a key is pressed within this time after the activation key, both are treated as normal typing.'}"
                                                   TextWrapping="Wrap" Margin="0,0,0,5" FontSize="11" Foreground="Gray"/>
                                        <Grid Margin="0,5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider Grid.Column="0" Minimum="0" Maximum="200"
                                                    TickFrequency="10" IsSnapToTickEnabled="True"
                                                    Value="{Binding RolloverThresholdMs}" Margin="0,0,10,0"/>
                                            <TextBlock Grid.Column="1" Width="50" VerticalAlignment="Center"
                                                       Text="{Binding RolloverThresholdMs, StringFormat='{}{0} ms'}"/>
                                        </Grid>
                                    </StackPanel>
                                </GroupBox>

                                <!-- Language -->
                                <GroupBox Header="{loc:Localize SettingsWindow.Language, Default='Language'}" Margin="0,0,0,15">
                                    <StackPanel Margin="10">
                                        <TextBlock Text="{loc:Localize SettingsWindow.LanguageDescription, Default='Select your preferred language:'}"
                                                   TextWrapping="Wrap" Margin="0,0,0,10"/>
                                        <ComboBox Width="200" HorizontalAlignment="Left"
                                                  ItemsSource="{Binding AvailableLanguages}"
                                                  DisplayMemberPath="NativeName"
                                                  SelectedValuePath="Code"
                                                  SelectedValue="{Binding SelectedLanguage}"/>
                                    </StackPanel>
                                </GroupBox>

                                <!-- About -->
                                <GroupBox Header="{loc:Localize SettingsWindow.About, Default='About'}" Margin="0,0,0,15">
                                    <StackPanel Margin="10">
                                        <TextBlock Text="{loc:Localize SettingsWindow.AboutTitle, Default='TouchCursor'}" Margin="0,5" FontWeight="Bold"/>
                                        <TextBlock Text="{loc:Localize SettingsWindow.AboutVersion, Default='Version 1.0'}" Margin="0,5"/>
                                        <TextBlock Text="{loc:Localize SettingsWindow.AboutOriginal, Default='Based on original TouchCursor by Martin Stone'}" Margin="0,5"/>
                                        <TextBlock Text="{loc:Localize SettingsWindow.AboutLicense, Default='Licensed under GNU GPL v3'}" Margin="0,5"/>
                                    </StackPanel>
                                </GroupBox>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
